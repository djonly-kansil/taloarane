// âœ… Cek otomatis jika user sudah login
onAuthStateChanged(auth, async (user) => {
	if (user) {
		spinner.style.display = "block";
		
		try {
			const userRef = doc(db, "users", user.uid);
			const userSnap = await getDoc(userRef);
			
			if (userSnap.exists()) {
				const role = userSnap.data().role || "viewer";
				
				if (role === "admin") {
					window.location.href = "../admin/admin.html";
				} else if (role === "editor") {
					window.location.href = "../admin/editor.html";
				} else {
					window.location.href = "/index.html";
				}
			} else {
				console.warn("Data pengguna tidak ditemukan.");
				spinner.style.display = "none";
			}
		} catch (err) {
			console.error("Gagal ambil data user:", err);
			spinner.style.display = "none";
		}
	}
});
