<!DOCTYPE html>
<html lang="id">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="assets/style.css">
  <meta charset="UTF-8">
  <title>Peta Kampung Taloarane</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 500px; width: 100%; margin-top: 20px; }
    .map-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
      justify-content: center;
    }
    .map-buttons button {
      padding: 10px 15px;
      background-color: #007aa5;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    .map-buttons button:hover {
      background-color: #005c7a;
    }
  </style>
  <script src="assets/script.js" type="module"></script>
</head>

<body>

  <header id="slideshow-header">
    <div id="slider-track"></div>
    <div class="header-overlay">
      <h1>Selamat Datang di Kampung Taloarane</h1>
      <div class="marquee">
        <span>Wisata Budaya, Sejarah, dan Keindahan Alam di Jantung Kepulauan Sangihe</span>
      </div>
    </div>
  </header>

  <nav>
    <a href="index.html">Beranda</a>
    <a href="sejarah.html">Sejarah</a>
    <a href="geografis.html">Geografis</a>
    <a href="leader.html">Kepala Desa</a>
    <a href="budaya.html">Budaya</a>
    <a href="peta.html">Peta</a>
  </nav>

  <div class="container">
    <div class="map-buttons">
      <button onclick="goToLocation('raja')">Rumah Raja</button>
      <button onclick="goToLocation('kantor')">Kantor Desa</button>
      <button onclick="goToLocation('gereja')">Gereja Katolik</button>
      <button onclick="goToLocation('camat')">Rumah Dinas Camat</button>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-rotate@0.2.8/dist/leaflet-rotate.js"></script>

    <script>
	const locations = {
		raja: {
			coords: [3.565893, 125.517683],
			label: "Rumah Raja"
		},
		kantor: {
			coords: [3.567679, 125.518160],
			label: "Kantor Desa Taloarane"
		},
		gereja: {
			coords: [3.564519, 125.517578],
			label: "Gereja Katolik"
		},
		camat: {
			coords: [3.565330, 125.518099],
			label: "Rumah Dinas Camat"
		}
	};
	
	const map = L.map('map', {
		rotate: true,
		rotateControl: { closeOnZeroBearing: false },
		bearing: 0
	}).setView(locations.kantor.coords, 16);
	
	const satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
		attribution: 'Tiles © Esri'
	}).addTo(map);
	
	const osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
		attribution: '© OpenStreetMap contributors'
	});
	
	L.control.layers({ "Satelit": satelliteLayer, "Peta Jalan": osmLayer }).addTo(map);
	
	const markers = {};
	for (const key in locations) {
		const loc = locations[key];
		markers[key] = L.marker(loc.coords).addTo(map).bindPopup(loc.label);
	}
	
	// Fungsi navigasi dengan animasi zoom-out dan zoom-in
	function goToLocation(key) {
		const target = locations[key];
		
		// Zoom out dulu
		map.setZoom(17, { animate: true });
		
		// Setelah 400ms, geser ke lokasi dan zoom in lagi
		setTimeout(() => {
			map.setView(target.coords, 17, { animate: true });
			markers[key].openPopup();
		}, 400);
	}
	
	// Tampilkan popup awal
	markers.kantor.openPopup();
</script>
  </div>

</body>
</html>